# Тесты плагинов

[← Назад](../README.md)

Тесты для локальных Vue-плагинов и директив.

## Что проверяем

- Корректность установки директив и их опций.
- Поведение плагинов при включении и отключении функциональности.

## Подход

- Создавайте тестовый `app` через `createApp` и монтируйте в реальный DOM-элемент.
- После теста делайте `app.unmount()` и удаляйте контейнер.
- Для проверки обновлений директив используйте `nextTick()`.

Пример очистки:

```ts
const cleanup = ({ app, host }: { app: ReturnType<typeof createApp>; host: HTMLElement }) => {
  app.unmount()
  host.remove()
}
```

## Описание тестов

### `tests/plugins/TestIdPlugin.spec.ts`

| Тест                                        | Описание                                      |
| ------------------------------------------- | --------------------------------------------- |
| `устанавливает data-testid когда включен`   | Проверяет установку `data-testid` по умолчанию. |
| `не устанавливает data-testid когда отключен` | Проверяет отключение `data-testid` при `enabled=false`. |
| `снимает data-testid при сбросе значения`   | Проверяет удаление `data-testid` при установке `null`. |
| `не устанавливает data-testid при пустом id` | Проверяет отсутствие `data-testid` при пустом идентификаторе. |
